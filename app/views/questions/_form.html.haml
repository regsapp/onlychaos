/ :javascript
/   $(function() {
/     function makePreview(inputSelector, previewSelector) {
/       input = $(inputSelector).val();
/       $(previewSelector).html(input);
/       previewId =  previewSelector.replace('#', '');
/       MathJax.Hub.Queue(["Typeset",MathJax.Hub, previewId]);
/     }

/     $('body').keyup(function(){makePreview('#question_correct_answer', '#answer_preview')});
/     $('body').bind('updated',function(){makePreview('#question_correct_answer', '#answer_preview')});
/     makePreview('#question_correct_answer', '#answer_preview');
/   });

= form_for @question, :html => { :class => "form-horizontal" } do |f|
  -if @question.errors.any?
    .alert.alert-danger.alert-dismissable
      %button.close{"aria-hidden" => "true", "data-dismiss" => "alert", :type => "button"} &times;
      %h4= "#{pluralize(@question.errors.count, "error")} prohibited this question from being saved:"

      %ul
        - @question.errors.full_messages.each do |msg|
          %li= msg
  .form-group
    = f.label :year_group, :class => 'col-sm-2 control-label'
    .col-sm-10
      = f.collection_select :year_group_id, YearGroup.all, :id, :name, { prompt: true }, :class => 'form-control'
  .form-group
    = f.label :category, :class => 'col-sm-2 control-label'
    .col-sm-10
      = f.collection_select :category_id, Category.all, :id, :name, { prompt: true }, :class => 'form-control'
  .form-group
    = f.label :exam_boards, :class => 'col-sm-2 control-label'
    .col-sm-10
      = hidden_field_tag "question[exam_board_ids][]", nil
      - ExamBoard.all.each do |exam_board|
        = check_box_tag "question[exam_board_ids][]", exam_board.id, @question.exam_board_ids.include?(exam_board.id), id: dom_id(exam_board)
        = label_tag dom_id(exam_board), exam_board.name
        %br
  .form-group
    = f.label :description, :class => 'col-sm-2 control-label'
    .col-sm-10
      = f.cktext_area :description, :class => 'col-sm-2 control-label', :ckeditor => {:language => 'en', extraPlugins: 'mathjax'}
  .form-group
    = f.label :marks, :class => 'col-sm-2 control-label'
    .col-sm-10
      = f.number_field :marks, :class => 'form-control', :min => 1
  .form-group
    = f.label :answer_type, :class => 'col-sm-2 control-label'
    .col-sm-10
      = f.collection_select :answer_type, Answer::TYPES, :to_s, :to_s, { prompt: true }, :class => 'form-control'
  = f.fields_for :correct_answer, @question.correct_answer do |builder|
    .form-group
      = builder.label :correct_answer, :class => 'col-sm-2 control-label'
      .col-sm-10
        %h5 Raw (text, ASCIImath)
        = builder.text_area :content, :class => 'form-control'
        %h5 Preview
        #answer_preview
  .form-group
    .col-sm-offset-2.col-sm-10
      = f.submit :class => 'btn btn-primary'

